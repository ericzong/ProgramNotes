# 本地简单变基

## 场景

假设我们有一个“空”的本地仓库，现在进行一些开发后，创建一个分支，然后在新分支上进行后续开发，然后将新分支通过变基合并回master分支，最后删除新分支。

主要步骤如下：

1. 在master分支下进行开发；
2. 创建v1分支，并转到v1分支；
3. 在v1分支下进行后续开发；
4. 变基，将v1的修改合并到master；
5. 删除v1分支。

## 操作过程

首先，查看下仓库目录，它应该是这样的：

```
$ ls -a
./  ../  .git/  .gitignore
```

创建1.txt、2.txt、3.txt等3个文件，模拟开发。

查看下当前仓库的分支情况：

```
$ git branch
* master
```

可见，当前仅有master分支。创建v1分支，并查看仓库分支：

```
$ git branch v1
$ git branch -v
* master a0cf45a init
  v1     a0cf45a init
```

注意，这里查看分支命令增加了“-v”参数，这会得到更多的分支信息，包括提交ID和注释。

从上面结果可以看到，master和v1分支的ID都是“a0cf45a”，这其实说明当前master和v1指向的是同一次提交。

然后将修改（增加的文件）提交。

v1分支创建成功了，现在我们可以切换到它上面继续工作了：

```
$ git checkout v1
Switched to branch 'v1'
```

当然，我们也可以快捷地使用带“-b”参数的checkout命令创建并切换到一个新分支：

```
$ git checkout -b v1
```

该命令会直接创建v1分支，并切换到其上。当然，必须指定一个不存在的分支，否则会报错提示已存在。

在v1分支中创建4.txt、5.txt、6.txt文件，提交，切换回master分支。

这时，就可以执行变基操作了：

```
$ git rebase v1
First, rewinding head to replay your work on top of it...
Applying: develop
```

当然，也可以不切换回master分支，直接执行如下命令：

```
$ git rebase v1 master
First, rewinding head to replay your work on top of it...
Fast-forwarded master to v1.
```

此时，变基后会自动切换回master分支。

再查看目录，会发现目录中已经有了4.txt、5.txt、6.txt三个文件了。

最后，v1分支的开发任务已完成，通常应该删除它：

```
$ git branch -d v1
Deleted branch v1 (was 3eb945c).
```

